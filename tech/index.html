<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Teches | Ken Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Teches - Ken Blog">
<meta name="author" content="Ken">
<link rel="canonical" href="http://www.hello-api.cn/tech/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.4398b09e795c3aac93a04f4160281925a588bcdf14941ead87ab7bfe555ba854.css" integrity="sha256-Q5iwnnlcOqyToE9BYCgZJaWIvN8UlB6th6t7/lVbqFQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://www.hello-api.cn/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://www.hello-api.cn/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://www.hello-api.cn/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://www.hello-api.cn/apple-touch-icon.png">
<link rel="mask-icon" href="http://www.hello-api.cn/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://www.hello-api.cn/tech/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Teches" />
<meta property="og:description" content="Ken blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.hello-api.cn/tech/" /><meta property="og:image" content="http://www.hello-api.cn/papermod-cover.png"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://www.hello-api.cn/papermod-cover.png"/>

<meta name="twitter:title" content="Teches"/>
<meta name="twitter:description" content="Ken blog"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Teches",
      "item": "http://www.hello-api.cn/tech/"
    }
  ]
}
</script><meta name="shenma-site-verification" content="fa86e3feb16384882d9270489eab2715_1660870831">
<meta name="360-site-verification" content="fd75df938cdcbc7973283e01cd15fecb" />

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://www.hello-api.cn/" accesskey="h" title="Ken Blog (Alt + H)">Ken Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://www.hello-api.cn/archives" title="时间轴">
                    <span>时间轴</span>
                </a>
            </li>
            <li>
                <a href="http://www.hello-api.cn/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://www.hello-api.cn/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://www.hello-api.cn/">主页</a></div>
  <h1>
    Teches
    <a href="index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>初始dnsdist的负载算法
    </h2>
  </header>
  <div class="entry-content">
    <p>DNSDist 支持多种负载均衡算法，包括以下常见算法：
Round-robin（轮询）：DNSDist 按照一定的顺序依次将 DNS 查询请求发送给后端 DNS 服务器，直到所有服务器都被轮询一遍。
Random（随机）：DNSDist 随机选择一个后端 DNS 服务器，并将 DNS 查询请求发送给它。
LeastOutstanding（最小连接）：DNSDist 根据每个服务器的当前连接数，选择连接数最少的服务器，并将 DNS 查询请求发送给它。
Source IP Hashing（源 IP 哈希）：DNSDist 使用查询请求的源 IP 地址计算哈希值，并将该请求发送到哈希值对应的后端服务器上。对于同一个源 IP 地址的查询请求，DNSDist 会将它们发送到同一个后端服务器上。
要使用这些负载均衡算法，您需要在 DNSDist 的配置文件中为每个后端 DNS 服务器设置相应的负载均衡算法。例如，以下配置示例使用 Round-robin 算法将 DNS 查询请求分发给三个后端 DNS 服务器：</p>
  </div>
  <footer class="entry-footer"><span title='2023-02-27 15:03:00 +0800 CST'>二月 27, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to 初始dnsdist的负载算法" href="http://www.hello-api.cn/tech/dnsdist-001/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>tronlink-归集系统
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 首先要了解下tronlink的交易机制,进行trc20如usdt和usdc转账的时候,如果没有冻结能量将会损耗一定的trx,该系统的目的就是减少这部分损耗的trx
相关笔记 tronlink-扫块系统,有需要的可先前往了解
目标 搭建冻结能量系统,例如你有10000trx后,在自己的交易系统里可以根据需求为自己的子钱包进行冻结能量,减少trx的支出
前置条件 python
正式内容 下面会细分说明下每个def的方法用途,以及总的冻结流程如何处理
获取当次可冻结的钱包数 每完成一次流程,需要执行(解冻-&gt;质押)*n-&gt;投票,计算大概需要的能量判断该次可操作多少个,基础操作目前发现大约300带宽一次
def get_max_unfreeze_count(tronapi): once = 300 getaccountnet = tronapi.getaccountresource() freeNetUsed = getaccountnet[&#39;freeNetUsed&#39;] if &#39;freeNetUsed&#39; in getaccountnet else 0 freeNetLimit = getaccountnet[&#39;freeNetLimit&#39;] if &#39;freeNetLimit&#39; in getaccountnet else 0 NetUsed = getaccountnet[&#39;NetUsed&#39;] if &#39;NetUsed&#39; in getaccountnet else 0 NetLimit = getaccountnet[&#39;NetLimit&#39;] if &#39;NetLimit&#39; in getaccountnet else 0 bandwidth = NetLimit &#43; freeNetLimit - NetUsed - freeNetUsed # 质押-&gt;投票 固定操作两次 counts=math.floor((bandwidth-once) / (2 * once)) print(&#34;[%s]:当前带宽:%s 可操作:%s个地址&#34; % (datetime....</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-20 10:32:00 +0800 CST'>八月 20, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to tronlink-归集系统" href="http://www.hello-api.cn/tech/tronlink-002/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>从0到1 记录搭建Hugo个人博客-04 增加评论功能
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 搭建个人博客或者其他网站站点的时候,只有静态页面显得比较冷清,想了解自己的文章能不能帮到更多有相同疑惑的人,或者为自己的网站增添功能
目标 扩展自己的网站支持评论功能
前置条件 有github的账号
正式内容 感谢提供这个评论功能的giscus,在不用维护评论功能以及数据库的情况下,这是款十分便利的评论系统
创建github仓库 首先需要创建一个github的仓库,用于保存评论的留言,并且需要一些小小的配置,参考官网
选择 giscus 连接到的仓库。请确保：
此仓库是公开的，否则访客将无法查看 discussion。 giscus app 已安装否则访客将无法评论和回应。 指导入口 Discussions功能已在你的仓库中启用。指导 选择配置 创建完仓库后,在giscus的配置栏中选择自己需要的配置 如本文的配置为
&lt;script src=&#34;https://giscus.app/client.js&#34; data-repo=&#34;suguer/giscus.github.io&#34; data-repo-id=&#34;R_kgDOH08FpA&#34; data-category=&#34;Announcements&#34; data-category-id=&#34;DIC_kwDOH08FpM4CQ2jj&#34; data-mapping=&#34;title&#34; data-strict=&#34;0&#34; data-reactions-enabled=&#34;1&#34; data-emit-metadata=&#34;0&#34; data-input-position=&#34;top&#34; data-theme=&#34;preferred_color_scheme&#34; data-lang=&#34;zh-CN&#34; data-loading=&#34;lazy&#34; crossorigin=&#34;anonymous&#34; async&gt; &lt;/script&gt; 嵌入js代码 hugo的详情文章路径一般在主题下的layouts/_default/single.html，建议不要在主题下theme直接修改文件，避免后续升级覆盖没了，可在根目录下相同创建出layouts/_default/single.html，接着在代码最后粘贴giscus的那段js代码即可</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-18 12:18:00 +0800 CST'>八月 18, 2022</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to 从0到1 记录搭建Hugo个人博客-04 增加评论功能" href="http://www.hello-api.cn/tech/hugo-004/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Gitblit-如何实现自动编译发布
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 在外网正式环境中如果配置不足,编译前端项目可能导致服务器的卡死甚至死机,因此可采取内网服务器上编译再自动发布
目标 内网编译前端项目,分发到另一个git项目并自动提交发布
前置条件 gitblit
正式内容 1. 创建 append-auto-compile.groovy import com.gitblit.GitBlit import com.gitblit.Keys import com.gitblit.models.RepositoryModel import com.gitblit.models.TeamModel import com.gitblit.models.UserModel import com.gitblit.utils.JGitUtils import com.gitblit.utils.StringUtils import java.text.SimpleDateFormat import org.eclipse.jgit.api.CloneCommand import org.eclipse.jgit.api.PullCommand import org.eclipse.jgit.api.Git import org.eclipse.jgit.lib.Repository import org.eclipse.jgit.lib.Config import org.eclipse.jgit.revwalk.RevCommit import org.eclipse.jgit.transport.ReceiveCommand import org.eclipse.jgit.transport.ReceiveCommand.Result import org.eclipse.jgit.util.FileUtils import org.slf4j.Logger logger.info(&#34;append-auto-compile hook triggered by ${user.username} for ${repository.name} l&#34;) def rootFolder = &#39;/home/git/&#39; def bare = false def cloneAllBranches = true def cloneBranch = &#39;refs/heads/master&#39; def includeSubmodules = true def repoName = repository....</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-16 15:50:00 +0800 CST'>八月 16, 2022</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to Gitblit-如何实现自动编译发布" href="http://www.hello-api.cn/tech/gitblit/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Github-
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 目前github已经不允许使用账号密码上传代码,因此记录如何通过设置ssh来上传
目标 前置条件 能运行ssh-keygen
正式内容 ssh-keygen -t rsa -C “email”
在 C:\Users\用户.ssh下
|- id_rsa (上传的时候携带该数据)
|- id_rsa.pub (可在项目或者个人中心设置中添加该数据)
如果想要免密码上传代码
可输入 http://账号:密码@url.gt</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-16 15:35:00 +0800 CST'>八月 16, 2022</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to Github-" href="http://www.hello-api.cn/tech/github-001/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>tronlink-扫块系统
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 对于某些网站平台如果想支持收取波场区块链,但是又不清楚完整的流程应该如何部署的话,这里可以提供一套较为完整的方案,实现如商城下支持对客户的在线支付,
目标 实现客户在线支付,收取波场链的usdt或usdc,并且自动支付和激活订单,最后能归集到一个账户上自由使用
前置条件 在波场链有足够的trx,数量的多少取决于你对于归集的效率的需求,如果需要归集的周期越短,效率越快,则需要的trx越多
1个总钱包,其中会扩展的功能有,分发冻结能量,收款,激活钱包,也可以看业务需要拆开成3个钱包
开发环境: python mysql
正式内容 所有的接口以及交互均来自 波场链官网文档 ,如果对于文档不太熟的同学请先阅读了解下波场链的交易流程
主要数据结构 节点数据 block_chain_block
数据类型 类型 描述 id bigint 区块节点 total int 总交易数 active int 已激活交易数 created_at timestamp 创建时间 updated_at timestamp 更新时间 started_at timestamp 开始执行时间 ended_at timestamp 结束执行时间 block_at timestamp 节点时间 error timestamp 节点错误信息 钱包数据 block_chain_wallet
数据类型 类型 描述 id int 自增id address varchar(255) 地址 private_key varchar(1024) 地址密钥(建议保存到数据库时加密) user_id int 客户用户ID created_at timestamp 创建时间 updated_at timestamp 更新时间 deposit decimal(30,6) 余额 status varchar(16) 状态 扫块系统 想要获取到链上所有的交易信息,主要有两种方式,第一自建超级节点服务器,这样就可以频繁获取数据而不受限制,但是对于一般的网站平台来说,搭建一台波场链节点服务器浪费了资金,因此这里采用第二种方式,通过官网提供的接口进行查询同步,需注意本文涉及用到的接口均是固块化API...</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-16 10:15:00 +0800 CST'>八月 16, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to tronlink-扫块系统" href="http://www.hello-api.cn/tech/tronlink-001/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>从0到1 记录搭建Hugo个人博客-03 使用Algolia搜索
    </h2>
  </header>
  <div class="entry-content">
    <p>Hugo添加Algolia搜索支持 本文主要介绍如何在Hugo上增加Algolia的搜索支持,Alogolia官网
添加Algolia搜索支持主要以下步骤： ###1. 进入 Algolia 官网注册创建环境
个人使用选择免费版即可,可以满足日常需求了
地区若是国内则建议选择Hong Kong ,延迟较小效果比较好
最后提交即可
###2. 创建Application和Index 名称可自定义,我为了方便区别,创建都习惯用直接的域名作为名称 https://www.algolia.com/account/api-keys/all?applicationId=你的applicationId ###3. Hugo配置Algolia的环境
修改 config.toml 文件声明需要生成Algolia索引文件以及相关信息 [outputs]
home = [“HTML”, “RSS”, “Algolia”]
…中间省略
[outputFormats.Algolia]
baseName = “algolia”
isPlainText = true
mediaType = “application/json”
notAlternative = true
[params.algolia]
appId = “你的Application ID”
indexName = “你的索引名字”
searchOnlyKey = “你的Search-Only API Key”
注意outputs下面home的末尾有&#34;Algolia&#34;，漏了就不会生成了。 appId, indexName, searchOnlyKey 填写刚才记录的Algolia信息。
根目录下 layouts/_default (没有就新建) 文件夹中新建 list.algolia.json 文件，内容如下: {{/* 生成Algolia搜索索引文件 /}}
{{- $.Scratch.Add “index” slice -}}...</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-15 11:24:00 +0800 CST'>八月 15, 2022</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to 从0到1 记录搭建Hugo个人博客-03 使用Algolia搜索" href="http://www.hello-api.cn/tech/hugo-003/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>php-分享自有系统接入OCR图片识别
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 最近比较了几家大的云平台产品,发现百度云的ocr识别,只要通过了企业认证的话,可以每天免费获取一定额度的使用,因此在这里分享下如何使用ocr识别api
目标 可用在实现内部员工系统的快速身份认证,或者部分客户的营业执照和个人认证,注意仅限小量内部使用,如需用在正式环境中建议购买足够的流量包
前置条件 开发环境 PHP 百度云能企业认证
正式内容 百度接口的认证方式 百度的鉴权方式是以Token的方式,具体教程可查看官网API,这里不重复说明了
function getToken 封装下获取Token的方式,避免重复请求次数过于频繁
public function getToken() { $filename = &#34;/data/baidu_access_token.{$this-&gt;access_key}.json&#34;; if (file_exists($filename)) { $content = file_get_contents($filename); if ($content) { $json = json_decode($content, 1); if (strtotime($json[&#39;expires_in&#39;]) &gt; time()) { return $json[&#39;access_token&#39;]; } } } $resp = json_decode($this-&gt;client-&gt;request(&#34;POST&#34;, &#34;https://aip.baidubce.com/oauth/2.0/token&#34;, [ &#39;form_params&#39; =&gt; [ &#39;grant_type&#39; =&gt; &#39;client_credentials&#39;, &#39;client_id&#39; =&gt; $this-&gt;access_key, &#39;client_secret&#39; =&gt; $this-&gt;secret_key, ] ])-&gt;getBody()-&gt;getContents(), 1); $data = [ &#39;access_token&#39; =&gt; $resp[&#39;access_token&#39;], &#39;expires_in&#39; =&gt; date(&#34;Y-m-d H:i:s&#34;, strtotime(&#34;&#43;29 day&#34;)), ]; file_put_contents($filename, json_encode($data, JSON_UNESCAPED_UNICODE)); return $resp[&#39;access_token&#39;]; } private function request($action, $p) { $option = [ &#39;query&#39; =&gt; [ &#39;access_token&#39; =&gt; $this-&gt;getToken(), ], ]; if ($this-&gt;target == &#39;face&#39;) { $option[&#39;json&#39;] = $p; } else { $option[&#39;form_params&#39;] = $p; } $resp = $this-&gt;client-&gt;request(&#34;POST&#34;, &#34;{$api_url}/{$action}&#34;, $option) -&gt;getBody() -&gt;getContents(); return json_decode($resp, true); } 身份证识别 function OcrIdcard 先展示官方文档,文档中可看出ocr的识别支持两种提交方式,图片的base64或者图片url,因此这里稍微封装一下...</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-15 10:35:00 +0800 CST'>八月 15, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to php-分享自有系统接入OCR图片识别" href="http://www.hello-api.cn/tech/php-ocr/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Php邮件收取imap
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 招商银行的收款通知可以添加邮件推送,因此利用php-imap收取邮件,可达到自动化确款的目的
目标 前置条件 composer require php-imap/php-imap
正式内容 php-imap 的使用 $mailbox = new Mailbox( &#39;{SMTP服务器:SMTP端口号/imap}INBOX&#39;, // IMAP server and mailbox folder &#39;邮箱账号&#39;, // Username for the before configured mailbox &#39;邮箱密码&#39;, // Password for the before configured username null, // Directory, where attachments will be saved (optional) &#39;UTF-8&#39; // Server encoding (optional) ); try { $mailsIds = $mailbox-&gt;searchMailbox(&#39;ALL&#39;); } catch (PhpImap\Exceptions\ConnectionException $ex) { echo &#34;IMAP connection failed: &#34; . $ex; die(); } rsort($mailsIds); foreach ($mailsIds as $key =&gt; $item) { //循环遍历 $mail = $mailbox-&gt;getMail($item); $fromAddress = $mail-&gt;fromAddress; $content = $mail-&gt;textHtml; if(!...</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-12 17:32:00 +0800 CST'>八月 12, 2022</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to Php邮件收取imap" href="http://www.hello-api.cn/tech/php-imap/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>从0到1 用宝塔集成虚拟主机提供商
    </h2>
  </header>
  <div class="entry-content">
    <p>前言 对比一般市场上的虚拟主机,宝塔都能兼容支持绝大多数的功能,并且宝塔有个比较大的特点为,页面上的接口均可以通过api请求,因此产生了这个想法定制出宝塔基础的虚拟主机
目标 前置条件 window server的主机
宝塔需安装在数据盘D盘上
正式内容 定义的配置文件 /data/vhost/baota.conf.json
[ { &#34;fchrServer&#34;:&#34;flage&#34;, &#34;host&#34;:&#34;127.0.0.1&#34;, &#34;key&#34;:&#34;bt_api_key&#34;, &#34;port&#34;:&#34;8888&#34;, &#34;mysql&#34;:&#34;mysql_password&#34;, &#34;sqlserver&#34;:&#34;mssql_password&#34;, &#34;region_id&#34;:&#34;hk&#34;, &#34;zone_id&#34;:&#34;hk-02&#34;, &#34;network&#34;:&#34;bgp&#34; } ] 封装好的交互php函数方法
class VhostBaotaClient implements VhostClientInterface { use ApiConfigTrait; use ApiLoggerTrait; private $client; private $key = &#34;&#34;; public $host = &#34;&#34;; private $port = &#34;8888&#34;; private $mssql_password = &#34;&#34;; /** * @var array 远端主机的状态转换 */ public $RemoteStatus = [ &#39;1&#39; =&gt; &#39;Running&#39;, &#39;0&#39; =&gt; &#39;Stopped&#39;, ]; public $IISRemoteStatus = [ &#39;Started&#39; =&gt; &#39;Running&#39;, &#39;Stopped&#39; =&gt; &#39;Stopped&#39;, ]; public static function getConfig() { return json_decode(file_get_contents(&#39;/data/vhost/baota....</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-12 16:55:00 +0800 CST'>八月 12, 2022</span>&nbsp;·&nbsp;15 分钟&nbsp;·&nbsp;Ken</footer>
  <a class="entry-link" aria-label="post link to 从0到1 用宝塔集成虚拟主机提供商" href="http://www.hello-api.cn/tech/baota/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://www.hello-api.cn/tech/page/2/">下一页 »</a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="http://www.hello-api.cn/">Ken Blog</a></span>
    <span>
       Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <a href="http://beian.miit.gov.cn/" target="_blank">粤ICP备19150058号</a>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
